(()=>{"use strict";var __webpack_modules__={527:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.DocTreeProvider=void 0;const vscode=__webpack_require__(496),fs=__webpack_require__(147),path=__webpack_require__(17);class DocTreeProvider{getTreeItem(e){return e}getChildren(e){return e?Promise.resolve(e.children):Promise.resolve(this.getStructInConfig("/Users/eyresimpson/Code/zerocloud-doc/source-codes/zerocloud-doc/docs/.vuepress/config.js"))}getStructInConfig(e){let t=extractDefaultThemeConfigFromFile(e),r=[];return r.push(new DocItem("主菜单","结构",vscode.TreeItemCollapsibleState.Collapsed,this.analysisMenu(t.navbar))),r.push(new DocItem("文档章节","结构",vscode.TreeItemCollapsibleState.Collapsed,this.analysisStruct(t.sidebar))),r}analysisMenu(e){let t=[];for(let r in e)t.push(new DocItem(e[r].text,"菜单",vscode.TreeItemCollapsibleState.None,[]));return t}analysisStruct(e){let t=[];for(let r in e)if(e[r].children)t.push(new DocItem(e[r].text,"节点",vscode.TreeItemCollapsibleState.Collapsed,this.analysisStruct(e[r].children)));else{if("string"!=typeof e[r])continue;t.push(new DocItem(extractContent(e[r]),"文档",vscode.TreeItemCollapsibleState.None,[]))}return t}}exports.DocTreeProvider=DocTreeProvider;class DocItem extends vscode.TreeItem{constructor(e,t,r,o){super(e,r),this.label=e,this.type=t,this.collapsibleState=r,this.children=o,this.iconPath={light:path.join(__filename,"..","..","resources","light","dependency.svg"),dark:path.join(__filename,"..","..","resources","dark","dependency.svg")},this.tooltip=`${this.label}-${this.type}`,this.description=this.type}}function extractDefaultThemeConfigFromFile(filePath){const fileContent=fs.readFileSync(filePath,"utf-8"),defaultThemeMatch=fileContent.match(/defaultTheme\(([\s\S]*?)\)/);if(defaultThemeMatch&&defaultThemeMatch.length>1){const defaultThemeConfigString=defaultThemeMatch[1];try{const defaultThemeConfig=eval(`(${defaultThemeConfigString})`);return defaultThemeConfig}catch(e){console.error("Failed to parse defaultTheme config:",e)}}return null}function extractContent(e){const t=e.split("/");let r="";return r=e.endsWith("/")?t[t.length-2]:e.endsWith(".md")?t[t.length-1].split(".md")[0]:t[t.length-1],r}},529:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.activate=void 0;const o=r(496),n=r(147),i=r(17);function s(){const e=o.window.activeTextEditor;if(e){const t=e.document;if(t){const e=o.workspace.rootPath;if(e)return i.parse(i.relative(i.join(e,"/docs/section/"),t.fileName)).dir}}}t.activate=function(e){e.subscriptions.push(o.commands.registerCommand("markdown.extension.vp.insertImg",(()=>{o.window.showOpenDialog({title:"选择要插入的图片文件",openLabel:"插入此图片",canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!0}).then((e=>{if(null==e)return;const t=o.workspace.workspaceFolders,r=o.window.activeTextEditor;let a="",c="",l="";if(!r)return void console.log("【ERROR】无法获取当前打开的文档！");let d=r.document,u="";if(d){{const e=i.basename(d.fileName);u=i.parse(e).name}var _;a=u+"_"+function(){const e=new Date,t=e.getFullYear().toString().slice(-2),r=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getDate().toString().padStart(2,"0")}${r}${t}${e.getHours().toString().padStart(2,"0")}${e.getMinutes().toString().padStart(2,"0")}${e.getSeconds().toString().padStart(2,"0")}`}(),l=i.parse(e[0].path).ext,c=i.join(t[0].uri.fsPath,"docs/.vuepress/public/imgs/",s()),_=c,n.existsSync(_)||(n.mkdirSync(_,{recursive:!0}),console.log("【INFO】在 ",_," 创建目录")),n.copyFile(e[0].path,i.join(c,a+l),(e=>{e?console.error("【ERROR】权限或目录异常，无法复制文件",e):function(e){const t=o.window.activeTextEditor;if(t){const r=t.selection.active;return t.edit((t=>{t.insert(r,e)})).then((e=>e))}Promise.resolve(!1)}("<img :src=\"$withBase('/imgs/"+s()+"/"+a+l+"')\" />")}))}else console.log("【ERROR】无法获取当前打开的文档！")}))})),o.commands.registerCommand("markdown.extension.vp.workstart",(()=>{!function(){const e=o.window.createStatusBarItem(o.StatusBarAlignment.Left);e.text="$(file-code) My Panel",e.show()}()})))}},496:e=>{e.exports=require("vscode")},147:e=>{e.exports=require("fs")},17:e=>{e.exports=require("path")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=__webpack_require__(496),r=__webpack_require__(529),o=__webpack_require__(527);e.activate=function(e){t.window.createTreeView("nodeDependencies",{treeDataProvider:new o.DocTreeProvider}),function(e){r.activate(e),t.languages.setLanguageConfiguration("markdown",{wordPattern:/([*_]{1,2}|~~|`+)?[\p{Alphabetic}\p{Number}\p{Nonspacing_Mark}]+(_+[\p{Alphabetic}\p{Number}\p{Nonspacing_Mark}]+)*\1/gu})}(e)},e.deactivate=function(){}})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=main.js.map