(()=>{"use strict";var __webpack_modules__={527:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.DocTreeProvider=void 0;const vscode=__webpack_require__(496),fs=__webpack_require__(147),vscode_1=__webpack_require__(496);class DocTreeProvider{getTreeItem(e){return e}getChildren(e){return e?Promise.resolve(e.children):Promise.resolve(this.getStructInConfig("/Users/eyresimpson/Code/zerocloud-doc/source-codes/zerocloud-doc/docs/.vuepress/config.js"))}getStructInConfig(e){let t=extractDefaultThemeConfigFromFile(e),o=[];return o.push(new DocItem("主菜单","结构",vscode.TreeItemCollapsibleState.Collapsed,this.analysisMenu(t.navbar),vscode_1.ThemeIcon.Folder)),o.push(new DocItem("文档章节","结构",vscode.TreeItemCollapsibleState.Collapsed,this.analysisStruct(t.sidebar),vscode_1.ThemeIcon.Folder)),o}analysisMenu(e){let t=[];for(let o in e)t.push(new DocItem(e[o].text,"菜单",vscode.TreeItemCollapsibleState.None,[],vscode_1.ThemeIcon.Folder));return t}analysisStruct(e){let t=[];for(let o in e)if(e[o].children)t.push(new DocItem(e[o].text,"节点",vscode.TreeItemCollapsibleState.Collapsed,this.analysisStruct(e[o].children),vscode_1.ThemeIcon.Folder));else{if("string"!=typeof e[o])continue;t.push(new DocItem(extractContent(e[o]),"文档",vscode.TreeItemCollapsibleState.None,[],vscode_1.ThemeIcon.File))}return t}}exports.DocTreeProvider=DocTreeProvider;class DocItem extends vscode.TreeItem{constructor(e,t,o,r,n=vscode_1.ThemeIcon.File){super(e,o),this.label=e,this.type=t,this.collapsibleState=o,this.children=r,this.iconPath=n,this.tooltip=`${this.label}-${this.type}`,this.description=this.type}}function extractDefaultThemeConfigFromFile(filePath){const fileContent=fs.readFileSync(filePath,"utf-8"),defaultThemeMatch=fileContent.match(/defaultTheme\(([\s\S]*?)\)/);if(defaultThemeMatch&&defaultThemeMatch.length>1){const defaultThemeConfigString=defaultThemeMatch[1];try{const defaultThemeConfig=eval(`(${defaultThemeConfigString})`);return defaultThemeConfig}catch(e){console.error("Failed to parse defaultTheme config:",e)}}return null}function extractContent(e){const t=e.split("/");let o="";return o=e.endsWith("/")?t[t.length-2]:e.endsWith(".md")?t[t.length-1].split(".md")[0]:t[t.length-1],o}},529:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.activate=void 0;const r=o(496),n=o(147),i=o(17);function s(){const e=r.window.activeTextEditor;if(e){const t=e.document;if(t){const e=r.workspace.rootPath;if(e)return i.parse(i.relative(i.join(e,"/docs/section/"),t.fileName)).dir}}}t.activate=function(e){e.subscriptions.push(r.commands.registerCommand("markdown.extension.vp.insertImg",(()=>{r.window.showOpenDialog({title:"选择要插入的图片文件",openLabel:"插入此图片",canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!0}).then((e=>{if(null==e)return;const t=r.workspace.workspaceFolders,o=r.window.activeTextEditor;let a="",c="",l="";if(!o)return void console.log("【ERROR】无法获取当前打开的文档！");let d=o.document,_="";if(d){{const e=i.basename(d.fileName);_=i.parse(e).name}var u;a=_+"_"+function(){const e=new Date,t=e.getFullYear().toString().slice(-2),o=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getDate().toString().padStart(2,"0")}${o}${t}${e.getHours().toString().padStart(2,"0")}${e.getMinutes().toString().padStart(2,"0")}${e.getSeconds().toString().padStart(2,"0")}`}(),l=i.parse(e[0].path).ext,c=i.join(t[0].uri.fsPath,"docs/.vuepress/public/imgs/",s()),u=c,n.existsSync(u)||(n.mkdirSync(u,{recursive:!0}),console.log("【INFO】在 ",u," 创建目录")),n.copyFile(e[0].path,i.join(c,a+l),(e=>{e?console.error("【ERROR】权限或目录异常，无法复制文件",e):function(e){const t=r.window.activeTextEditor;if(t){const o=t.selection.active;return t.edit((t=>{t.insert(o,e)})).then((e=>e))}Promise.resolve(!1)}("<img :src=\"$withBase('/imgs/"+s()+"/"+a+l+"')\" />")}))}else console.log("【ERROR】无法获取当前打开的文档！")}))})),r.commands.registerCommand("markdown.extension.vp.workstart",(()=>{!function(){const e=r.window.createStatusBarItem(r.StatusBarAlignment.Left);e.text="$(file-code) My Panel",e.show()}()})))}},496:e=>{e.exports=require("vscode")},147:e=>{e.exports=require("fs")},17:e=>{e.exports=require("path")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.exports}var __webpack_exports__={};(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=__webpack_require__(496),o=__webpack_require__(529),r=__webpack_require__(527);e.activate=function(e){t.window.createTreeView("nodeDependencies",{treeDataProvider:new r.DocTreeProvider}),function(e){o.activate(e),t.languages.setLanguageConfiguration("markdown",{wordPattern:/([*_]{1,2}|~~|`+)?[\p{Alphabetic}\p{Number}\p{Nonspacing_Mark}]+(_+[\p{Alphabetic}\p{Number}\p{Nonspacing_Mark}]+)*\1/gu})}(e)},e.deactivate=function(){}})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=main.js.map